(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1309ef8d"],{1799:function(t,e,a){},2962:function(t,e,a){},"9c42":function(t,e,a){"use strict";var s=a("ae0d"),n=a.n(s);n.a},ae0d:function(t,e,a){},aff0:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mock-manage"}},[a("base-manage",{ref:"baseManage",attrs:{title:t.title,fields:t.fields,"system-path":"mock","filter-list":t.filterList},on:{addNew:t.addNew,edit:t.edit,changeStatus:t.changeStatus}}),a("mock-modal",{ref:"mockModal",attrs:{mode:t.mode},on:{refresh:t.refresh},model:{value:t.mockData,callback:function(e){t.mockData=e},expression:"mockData"}}),a("status-manage-modal",{ref:"statusManageModal",attrs:{system:"mock","select-task-info":t.selectTaskInfo},on:{refresh:t.refresh}})],1)},n=[],o=(a("6b54"),a("87b3"),a("b7f9")),i=a("4360"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-modal",{attrs:{"auto-close":t.$store.getters.FALSE,title:t.getTitle,size:"huge"},on:{ok:t.submit},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("div",{staticClass:"mock-card container"},[a("div",{staticClass:"va-row row align--center",attrs:{id:"info"}},[a("va-select",{staticClass:"flex xl3",attrs:{options:t.appOptions,label:"所属应用","text-by":"appName",disabled:t.disable},model:{value:t.autoApp,callback:function(e){t.autoApp=e},expression:"autoApp"}}),a("va-input",{staticClass:"flex mock-input",class:t.descriptionLength,attrs:{label:"描述",disabled:t.disable},on:{click:t.clickDes,blur:t.blurDes},model:{value:t.mockData.descriptions,callback:function(e){t.$set(t.mockData,"descriptions",e)},expression:"mockData.descriptions"}}),a("va-toggle",{staticClass:"flex implicit-toggle",attrs:{"true-value":1,"false-value":0,label:"自动化验证",small:t.$store.getters.TRUE},model:{value:t.mockData.implicit,callback:function(e){t.$set(t.mockData,"implicit",e)},expression:"mockData.implicit"}}),1===t.mockData.implicit?a("va-input",{staticClass:"flex mock-key",class:t.mockKeyLength,attrs:{label:"mock Key",disabled:t.$store.getters.TRUE},model:{value:t.mockData.mockKey,callback:function(e){t.$set(t.mockData,"mockKey",e)},expression:"mockData.mockKey"}}):t._e()],1),1===t.mockData.implicit?a("div",{staticClass:"va-row row align--center"},[a("label",{staticClass:"entrance-label"},[t._v("接口入口 : ")]),a("va-input",{staticClass:"flex xl7 ",attrs:{label:"className",placeholder:"com.dmall.y.XService；为环境稳定，禁用*",disabled:t.disable},model:{value:t.mockData.entranceClassName,callback:function(e){t.$set(t.mockData,"entranceClassName",e)},expression:"mockData.entranceClassName"}}),a("va-input",{staticClass:"flex xl4 entrance-method",attrs:{label:"methodName",placeholder:"为环境稳定，禁用*",disabled:t.disable},model:{value:t.mockData.entranceMethodName,callback:function(e){t.$set(t.mockData,"entranceMethodName",e)},expression:"mockData.entranceMethodName"}})],1):t._e(),a("mock-action",{ref:"mockAction",attrs:{implicit:t.mockData.implicit},model:{value:t.mockData.mockActionList,callback:function(e){t.$set(t.mockData,"mockActionList",e)},expression:"mockData.mockActionList"}}),t.showRate?a("va-progress-bar",{attrs:{buffer:t.rate}}):t._e()],1)])},l=[],r=(a("6762"),a("57e7"),a("d25f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mock-actions"}},t._l(t.actionData,(function(e,s){return t.showAction(e)?a("va-card",{staticClass:"mock-action"},[a("div",{staticClass:"va-row row justify--end icon-style align--baseline",attrs:{slot:"actions"},slot:"actions"},[t.showUp(s)?a("va-button",{staticClass:"flex",attrs:{flat:"",small:"",color:"info",icon:"glyphicon glyphicon-arrow-up"},on:{click:function(e){return t.clickUp(s)}}}):t._e(),t.showDown(s)?a("va-button",{staticClass:"flex",attrs:{flat:"",small:"",color:"info",icon:"glyphicon glyphicon-arrow-down"},on:{click:function(e){return t.clickDown(s)}}}):t._e(),a("va-button",{staticClass:"flex",attrs:{flat:"",small:"",icon:"glyphicon glyphicon-plus"},on:{click:function(e){return t.clickPlus(s)}}}),t.showRemove?a("va-button",{staticClass:"flex",attrs:{flat:"",small:"",color:"danger",icon:"glyphicon glyphicon-remove"},on:{click:function(e){return t.clickRemove(s)}}}):t._e()],1),a("div",{staticClass:"va-row row align--center"},[a("va-input",{staticClass:"flex xl7 ",attrs:{label:"className",placeholder:"com.dmall.y.XService；为环境稳定，禁用*",disabled:t.disable},model:{value:e.className,callback:function(a){t.$set(e,"className",a)},expression:"action.className"}}),a("va-input",{staticClass:"flex xl4 app-modal-input",attrs:{label:"methodName",placeholder:"为环境稳定，禁用*",disabled:t.disable},model:{value:e.methodName,callback:function(a){t.$set(e,"methodName",a)},expression:"action.methodName"}})],1),a("transition",{attrs:{name:"change-height"}},[0===t.implicit?a("va-input",{attrs:{label:"匹配条件",placeholder:"匹配条件为JSON.toString.contains；为环境稳定，禁用*; 自动化验证模式下，使用MOCK KEY,不需要该数据"},model:{value:e.expectKey,callback:function(a){t.$set(e,"expectKey",a)},expression:"action.expectKey"}}):t._e()],1),a("va-tabs",{staticClass:"tab",attrs:{center:t.$store.getters.TRUE,grow:t.$store.getters.TRUE},model:{value:e.mockType,callback:function(a){t.$set(e,"mockType",a)},expression:"action.mockType"}},t._l(t.tabTitles,(function(e){return a("va-tab",{key:e.key},[t._v("\n                "+t._s(e.text)+"\n            ")])})),1),a("div",{staticClass:"tab-content"},[0===e.mockType?a("va-input",{attrs:{type:"textarea",label:"期望返回值",autosize:t.$store.getters.TRUE},model:{value:e.expectValue,callback:function(a){t.$set(e,"expectValue",a)},expression:"action.expectValue"}}):t._e(),1===e.mockType?a("div",[a("va-tabs",{staticClass:"small-tab margin25",attrs:{center:t.$store.getters.TRUE,grow:t.$store.getters.TRUE},on:{input:t.needRandomChanged},model:{value:e.sleepTimeVO.needRandom,callback:function(a){t.$set(e.sleepTimeVO,"needRandom",a)},expression:"action.sleepTimeVO.needRandom"}},t._l(t.sleepTitles,(function(e){return a("va-tab",{key:e.key},[t._v("\n                        "+t._s(e.text)+"\n                    ")])})),1),e.sleepTimeVO.needRandom?a("div",{staticClass:"va-row row"},[a("va-input",{staticClass:"flex xl3 margin25",attrs:{label:"随机延迟min"},model:{value:e.sleepTimeVO.randomStart,callback:function(a){t.$set(e.sleepTimeVO,"randomStart",a)},expression:"action.sleepTimeVO.randomStart"}}),a("va-input",{staticClass:"flex xl3 margin1",attrs:{label:"随机延迟max"},model:{value:e.sleepTimeVO.randomEnd,callback:function(a){t.$set(e.sleepTimeVO,"randomEnd",a)},expression:"action.sleepTimeVO.randomEnd"}})],1):a("va-input",{staticClass:"small-input margin25",attrs:{label:"固定延迟时间"},model:{value:e.sleepTimeVO.baseTime,callback:function(a){t.$set(e.sleepTimeVO,"baseTime",a)},expression:"action.sleepTimeVO.baseTime"}})],1):t._e(),2===e.mockType?a("va-input",{attrs:{label:"报错消息"},model:{value:e.errorMsg,callback:function(a){t.$set(e,"errorMsg",a)},expression:"action.errorMsg"}}):t._e()],1)],1):t._e()})),1)}),u=[],m=(a("ac6a"),a("456d"),a("2fdb"),a("c5f6"),{name:"MockAction",props:{value:Array,implicit:Number},data:function(){return{tabTitles:[{key:0,text:"返回参数"},{key:1,text:"返回延迟"},{key:2,text:"返回报错"}],sleepTitles:[{key:0,text:"固定延迟"},{key:1,text:"随机延迟"}],actionData:this.value,disable:!1}},watch:{actionData:function(){this.$emit("input",this.actionData)}},computed:{showRemove:function(){return 1!==this.actionData.length}},methods:{needRandomChanged:function(){this.sleepTitles.push({}),this.sleepTitles.pop()},showAction:function(t){return!1===t.entrance||void 0===t.entrance},showUp:function(t){return 0!==t},showDown:function(t){return t+1!==this.actionData.length},clickUp:function(t){var e=this.actionData.splice(t,1);this.actionData.splice(t-1,0,e[0])},clickDown:function(t){var e=this.actionData.splice(t,1);this.actionData.splice(t+1,0,e[0])},clickPlus:function(t){this.actionData.splice(t+1,0,{mockType:0,expectKey:null,expectValue:null,errorMsg:null,sleepTimeVO:{baseTime:null,needRandom:0,randomEnd:null,randomStart:null}})},clickRemove:function(t){this.actionData.splice(t,1)}},created:function(){for(var t=0;t<this.actionData.length;t++)Object.keys(this.actionData[t]).includes("sleepTimeVO")||(this.actionData[t]["sleepTimeVO"]={needRandom:0})}}),p=m,d=(a("c7da"),a("2877")),f=Object(d["a"])(p,r,u,!1,null,"8a08af74",null),h=f.exports,k={name:"MockModal",components:{MockAction:h},props:{value:{type:Object},mode:String},data:function(){return{appOptions:[],open:!1,expectType:1,mockData:this.value,rate:0,showRate:!1,clickDescription:!1}},computed:{getTitle:function(){return this.mode+" mock"},autoApp:{get:function(){var t=this;if(void 0===this)return{};if(""===this.mockData.appId||this.appOptions===[])return{};var e=this.appOptions.filter((function(e){return e.id===t.mockData.appId}));return 1===e.length?e[0]:{}},set:function(t){this.mockData.appId=t.id}},disable:function(){return"edit"!==this.mode&&"new"!==this.mode},descriptionLength:function(){return this.clickDescription?"xl6":"xl3"},mockKeyLength:function(){return this.clickDescription?"xl1":"xl4"}},watch:{value:function(){this.mockData=JSON.parse(JSON.stringify(this.value))}},methods:{openModal:function(){this.open=!0},closeModal:function(){this.open=!1},clickDes:function(){this.clickDescription=!0},blurDes:function(){this.clickDescription=!1},submitCheck:function(){function t(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?"undefined"===typeof t||""===t:"undefined"===typeof t||""===t||-1!==t.indexOf("*")}var e=[],a=[];for(var s in t(this.mockData.appId)&&e.push("系统为必选项"),this.mockData.actionList)t(s.className,!1)&&e.push("类名为必选项,且不能含有*"),t(s.methodName,!1)&&e.push("方法名为必选项,且不能含有*"),this.implicit?(""!==this.mockData.entranceClassName&&""!==this.mockData.entranceMethodName||e.push("自动化验证模式下，入口信息必填"),a.includes(s.className+"#"+s.methodName)?e.push("自动化验证模式下，一个mockKey包含的方法不能重复"):a.push(s.className+"#"+s.methodName)):t(s.expectKey,!1)&&e.push("expectKey为必选项,且不能含有*");return 0!==e.length&&this.$swal({title:"Error",text:e.join("\r\t"),type:"error",confirmButtonColor:"#4ae387"}),0===e.length},submit:function(){var t=this;this.submitCheck()&&this.$axios.post("/mock/save",this.mockData).then((function(e){e.data.success?(t.taskId=e.data.data,t.$swal({type:"success",confirmButtonColor:"#4ae387",text:e.data.msg}).then((function(e){t.$emit("refresh"),t.closeModal()}))):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}))},getRate:function(){var t=this;this.webSocket=new WebSocket("".concat(i["a"].getters.getWebSocketBaseUrl())),this.webSocket.onopen=function(){t.webSocket.send("2@".concat(t.taskId)),t.showRate=!0},this.webSocket.onmessage=function(e){t.rate=e.data},this.webSocket.onerror=function(e){t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e})},this.webSocket.onclose=function(){"100"===t.rate?t.$swal({type:"success",confirmButtonColor:"#4ae387",text:"Success!"}).then((function(){t.$emit("refresh"),t.closeModal()})):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:"系统错误"}).then((function(){}))}}},created:function(){var t=this,e={pageSize:200,pageNum:1};this.$axios.post("/application/filter",e).then((function(e){e.data.success?t.appOptions=e.data.data.resultList:t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}))}},b=k,v=(a("ddc1"),Object(d["a"])(b,c,l,!1,null,"1b519a9a",null)),g=v.exports,x=a("e7c8"),w={name:"MockManage",components:{StatusManageModal:x["a"],MockModal:g,BaseManage:o["a"]},data:function(){return{title:"动态Mock",fields:[{name:"id",title:"ID"},{name:"appName",title:"应用名称"},{name:"descriptions",title:"介绍"},{name:"mockKey",title:"mock key"},{name:"implicit",title:"自动化验证",callback:function(t){return 1===t?"是":"否"}},{name:"createTime",title:"开始时间",callback:function(t){return i["a"].getters.getFormatDate(t)}},{name:"modifyTime",title:"修改时间",callback:function(t){return i["a"].getters.getFormatDate(t)}},{name:"__slot:redisStateSlot",title:"状态"},{name:"__slot:actionsSlot",title:"操作"}],filterList:["appId","description","className","methodName"],mode:"",status:0,selectTaskInfo:{},mockData:{appId:"",mockActionList:[{mockType:0}],implicit:0,mockKey:this.guid(),entranceClassName:"",entranceMethodName:""}}},methods:{addNew:function(){this.mode="new",this.mockData={appId:"",mockActionList:[{mockType:0}],implicit:0,mockKey:this.guid(),entranceClassName:"",entranceMethodName:""},this.$refs.mockModal.openModal()},edit:function(t){this.mockData=JSON.parse(JSON.stringify(t.param)),this.mode="edit",this.$refs.mockModal.openModal()},guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},changeStatus:function(t){console.log(t),this.status=t.taskStatus,this.selectTaskInfo=t,0!==this.status?4!==this.status?this.$refs.statusManageModal.openModal():this.$swal({title:"Error",text:"已终止，无法修改状态",type:"error",confirmButtonColor:"#4ae387"}):this.$swal({title:"Error",text:"准备中，无法修改状态；请等待状态为待运行后再次点击",type:"error",confirmButtonColor:"#4ae387"})},refresh:function(){this.$refs.baseManage.getFilterPage()}}},y=w,N=Object(d["a"])(y,s,n,!1,null,"60dad892",null);e["default"]=N.exports},b7f9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-manage"}},[a("va-card",{attrs:{title:t.title}}),a("base-filter",{staticClass:"mt-4",attrs:{"filter-list":t.filterList},on:{click:t.clickFilter,addNew:t.addNew}}),a("base-table",t._g({staticClass:"mt-4",attrs:{fields:t.fields,data:t.tableData,"per-page":t.perPage,"total-pages":t.totalPages},on:{pageSelected:t.pageSelected,remove:t.remove}},t.$listeners))],1)},n=[],o=(a("d25f"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-filter"}},[t.showFilter?a("va-card",{attrs:{title:"Filter"}},[a("div",{staticClass:"va-row row filter-part"},[t.show("appId")?a("va-select",{staticClass:"flex xl3",attrs:{label:"应用名称",options:t.appList,"text-by":"appName"},model:{value:t.appInfo,callback:function(e){t.appInfo=e},expression:"appInfo"}}):t._e(),t.show("appName")?a("va-select",{staticClass:"flex xl3",attrs:{label:"应用名称",options:t.appList,"text-by":"appName"},model:{value:t.appContent,callback:function(e){t.appContent=e},expression:"appContent"}}):t._e(),t.show("gitLabUrl")?a("va-input",{staticClass:"flex xl3",attrs:{label:"gitlab项目链接"},model:{value:t.gitLabUrl,callback:function(e){t.gitLabUrl=e},expression:"gitLabUrl"}}):t._e(),t.show("jenkinsJobName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"jenkins项目名称"},model:{value:t.jenkinsJobName,callback:function(e){t.jenkinsJobName=e},expression:"jenkinsJobName"}}):t._e(),t.show("requirementName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"需求名称"},model:{value:t.requirementName,callback:function(e){t.requirementName=e},expression:"requirementName"}}):t._e(),t.show("className")?a("va-input",{staticClass:"flex xl3",attrs:{label:"类全称(com.xx.yService)"},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}}):t._e(),t.show("methodName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"方法全称"},model:{value:t.methodName,callback:function(e){t.methodName=e},expression:"methodName"}}):t._e(),t.show("description")?a("va-input",{staticClass:"flex xl3",attrs:{label:"介绍"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}):t._e()],1),a("div",{staticClass:"va-row"},[a("va-button",{directives:[{name:"show",rawName:"v-show",value:t.showNew,expression:"showNew"}],staticClass:"base-filter-btn-new",on:{click:t.addNew}},[t._v("New")]),a("va-button",{staticClass:"base-filter-btn-filter",attrs:{color:"info"},on:{click:t.clickAction}},[t._v("Filter")])],1)]):t._e()],1)}),i=[],c=a("8fb3"),l=a("7a71"),r=a("0932"),u=a("4360"),m={name:"BaseFilter",components:{VaButton:r["a"],VaInput:l["a"],VaCard:c["a"]},props:{filterList:Array,showNew:{type:Boolean,default:!0}},computed:{showFilter:function(){return"undefined"!==typeof this.filterList&&this.filterList.length>0}},data:function(){return{appList:[],appInfo:"",appContent:"",gitLabUrl:"",jenkinsJobName:"",requirementName:"",className:"",methodName:"",description:""}},methods:{show:function(t){return this.filterList.includes(t)},addNew:function(){this.$emit("addNew")},clickAction:function(){var t={appId:this.appInfo.id,appName:this.appContent.appName,description:this.description,className:this.className,methodName:this.methodName};this.$emit("click",t)}},created:function(){var t=this,e={pageSize:200,pageNum:1};this.$axios.post("/application/filter",e).then((function(e){e.data.success?t.appList=e.data.data.resultList:t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}))}},p=m,d=(a("9c42"),a("2877")),f=Object(d["a"])(p,o,i,!1,null,"1d73718e",null),h=f.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-table"}},[a("va-card",[a("va-data-table",{attrs:{fields:t.fields,data:t.data,"per-page":t.perPage,"api-mode":t.apiMode,"total-pages":t.totalPages},on:{"page-selected":t.pageSelected},scopedSlots:t._u([{key:"redisStateSlot",fn:function(e){return[a("redis-status-template",t._g({attrs:{data:e.rowData},model:{value:e.rowData.taskStatus,callback:function(a){t.$set(e.rowData,"taskStatus",a)},expression:"props.rowData.taskStatus"}},t.$listeners))]}},{key:"actionsSlot",fn:function(e){return[a("actions-template",t._g({attrs:{data:e.rowData}},t.$listeners))]}}])})],1)],1)},b=[],v=a("04f4"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-button",{attrs:{small:"",color:t.autoColor,"icon-right":t.showIcon},on:{click:t.changeStatus}},[t._v(t._s(t.getText))])},x=[],w={name:"RedisStatusTemplate",props:{value:Number,data:Object},computed:{getText:function(){return"undefined"!==typeof this.data.connect&&0===this.data.connect?"异常":u["a"].getters.getTaskStatusEnum(this.value)},autoColor:function(){if("undefined"!==typeof this.data.connect&&0===this.data.connect)return"danger";switch(this.value){case 0:return"gray";case 1:return"info";case 2:return"success";case 3:return"warning";case 4:return"danger";case 5:return"danger"}},showIcon:function(){return[1,2,3].includes(this.value)?"fa fa-cog":""}},methods:{changeStatus:function(){this.$emit("changeStatus",this.data)}}},y=w,N=Object(d["a"])(y,g,x,!1,null,"4c43331c",null),C=N.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"actions-template"}},[a("va-button",{attrs:{flat:"",small:"",color:"gray",icon:"fa fa-pencil"},on:{click:t.edit}}),a("va-button",{attrs:{flat:"",small:"",color:"gray",icon:"fa fa-trash"},on:{click:t.remove}})],1)},D=[],T={name:"ActionsTemplate",props:{data:Object},methods:{edit:function(){this.$emit("edit",{param:this.data})},remove:function(){this.$emit("remove",{param:this.data})}}},_=T,S=Object(d["a"])(_,$,D,!1,null,"55445a51",null),M=S.exports,O={name:"BaseTable",components:{ActionsTemplate:M,RedisStatusTemplate:C,VaCard:c["a"],VaDataTable:v["a"]},props:{fields:{type:Array,required:!0},data:{type:Array,required:!0},perPage:{type:Number,default:10},totalPages:{type:Number,required:!0}},data:function(){return{apiMode:!0}},methods:{pageSelected:function(t){this.$emit("pageSelected",t)}}},B=O,I=Object(d["a"])(B,k,b,!1,null,"5afc1a2a",null),L=I.exports,A={name:"BaseManage",components:{VaCard:c["a"],BaseTable:L,BaseFilter:h},props:{title:{type:String,required:!0},systemPath:{type:String,required:!0},filterList:Array,fields:{type:Array,required:!0},perPage:{type:Number,default:10},initTable:{type:Boolean,default:!0}},data:function(){return{filter:{},tableData:[],totalPages:0,pageNum:1}},methods:{clickFilter:function(t){this.filter=t,this.getFilterPage()},addNew:function(){this.$emit("addNew")},remove:function(t){var e=this;4!==t.param.taskStatus?this.$swal({title:"Error",text:"请先结束规则后再尝试删除",type:"error",confirmButtonColor:"#4ae387"}):this.$swal({type:"warning",confirmButtonColor:"#4ae387",text:"确认删除该规则吗？"}).then((function(a){Object.keys(a).includes("value")&&!0===a["value"]&&e.$axios.post("/".concat(e.systemPath,"/remove"),t.param.id).then((function(t){t.data.success?(e.$swal({type:"success",confirmButtonColor:"#4ae387",text:t.data.msg}),e.getFilterPage()):e.$swal({type:"error",confirmButtonColor:"#4ae387",text:t.data.msg})}))}))},pageSelected:function(t){this.pageNum=t,this.getFilterPage()},getFilterPage:function(){var t=this,e=this.filter;e["pageSize"]=10,e["pageNum"]=this.pageNum,this.$axios.post("/".concat(this.systemPath,"/filter"),e).then((function(e){e.data.success?(t.totalPages=e.data.data.totalPages,t.tableData=e.data.data.resultList):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}))}},created:function(){this.initTable&&this.getFilterPage()}},R=A,E=Object(d["a"])(R,s,n,!1,null,"8b794c1e",null);e["a"]=E.exports},c7da:function(t,e,a){"use strict";var s=a("1799"),n=a.n(s);n.a},ddc1:function(t,e,a){"use strict";var s=a("2962"),n=a.n(s);n.a},e7c8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-modal",{attrs:{hideDefaultActions:t.$store.getters.TRUE,title:"状态管理"},on:{ok:t.submit},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[t.showRun?a("va-button",{on:{click:t.run}},[t._v("运行")]):t._e(),t.showRetry?a("va-button",{on:{click:t.retry}},[t._v("重试")]):t._e(),t.showPause?a("va-button",{attrs:{color:"warning"},on:{click:t.pause}},[t._v("暂停")]):t._e(),a("va-button",{attrs:{color:"danger"},on:{click:t.terminal}},[t._v("终止")])],1)},n=[],o=(a("ac6a"),a("456d"),a("6762"),a("2fdb"),{name:"StatusManageModal",props:{system:{type:String,required:!0},selectTaskInfo:{}},data:function(){return{open:!1,selectedOption:this.value,status:this.selectTaskInfo.taskStatus,connect:this.selectTaskInfo.connect}},computed:{showRun:function(){return(1===this.status||3===this.status)&&(void 0===this.connect||1===this.connect)},showPause:function(){return 2===this.status&&(void 0===this.connect||1===this.connect)},showRetry:function(){return 0===this.connect||5===this.status}},watch:{selectedOption:function(){this.$emit("input",this.selectedOption)},selectTaskInfo:function(){this.status=this.selectTaskInfo.taskStatus,this.connect=this.selectTaskInfo.connect}},methods:{openModal:function(){this.open=!0},closeModal:function(){this.open=!1},submit:function(){},run:function(){this.baseAction(2,"为了环境稳定，请保证任务配置确定过滤合理！！确定开始吗？")},pause:function(){this.baseAction(3,"确定暂停吗？")},terminal:function(){this.baseAction(4,"一旦终止，无法再次开启，确定终止吗？")},retry:function(){var t=this;this.$swal({title:"Warning",text:"请确认目标服务健康 & 目标方法存在，点击确认将重新请求目标服务",type:"warning",confirmButtonColor:"#cbd3da",showCancelButton:!0,cancelButtonColor:"#e34a4a"}).then((function(e){Object.keys(e).includes("value")&&!0===e["value"]&&t.$axios.post("/"+t.system+"/retry",t.selectTaskInfo["id"]).then((function(e){e.data.success?t.$swal({type:"success",confirmButtonColor:"#4ae387",text:e.data.msg}).then((function(){t.$emit("refresh"),t.closeModal()})):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}))}))},baseAction:function(t,e,a){var s=this;this.$swal({title:"Warning",text:e,type:"warning",confirmButtonColor:"#cbd3da",showCancelButton:!0,cancelButtonColor:"#e34a4a"}).then((function(e){if(Object.keys(e).includes("value")&&!0===e["value"]){var a={id:s.selectTaskInfo["id"],appId:s.selectTaskInfo["appId"],version:s.selectTaskInfo["version"],taskStatus:t};s.$axios.post("/"+s.system+"/changeStatus",a).then((function(t){t.data.success?s.$swal({type:"success",confirmButtonColor:"#4ae387",text:t.data.msg}).then((function(){s.$emit("refresh"),s.closeModal()})):s.$swal({type:"error",confirmButtonColor:"#4ae387",text:t.data.msg})}))}}))}}}),i=o,c=a("2877"),l=Object(c["a"])(i,s,n,!1,null,"41c27f41",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-1309ef8d.aef21f61.js.map