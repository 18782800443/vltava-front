(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a25d757c"],{"2b3b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"application-manage"}},[a("base-manage",{ref:"baseManage",attrs:{title:t.title,"system-path":"application",filterList:t.filterList,fields:t.fields},on:{addNew:t.addNew}}),a("application-modal",{ref:"appModal",attrs:{mode:t.mode},on:{refresh:t.refresh}})],1)},i=[],n=a("b7f9"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-modal",{attrs:{title:t.getTitle},on:{ok:t.submit},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("va-input",{staticClass:"app-modal-input",attrs:{label:"应用名称"},model:{value:t.appName,callback:function(e){t.appName=e},expression:"appName"}}),a("va-input",{staticClass:"app-modal-input",attrs:{label:"系统唯一名称",placeholder:"docker终端url中appUniqCode参数值，例：dmall-trade-api"},model:{value:t.systemUniqueName,callback:function(e){t.systemUniqueName=e},expression:"systemUniqueName"}}),a("va-input",{staticClass:"app-modal-input",attrs:{label:"部署单元",placeholder:"运行详情页中的部署单元，例：gz01a"},model:{value:t.zone,callback:function(e){t.zone=e},expression:"zone"}}),a("va-input",{staticClass:"app-modal-input",attrs:{label:"部署分组",placeholder:"运行详情页中的部署分组，例：blue"},model:{value:t.buildGroup,callback:function(e){t.buildGroup=e},expression:"buildGroup"}})],1)},l=[],r=a("860f"),c=a("7a71"),p={name:"ApplicationModal",components:{VaInput:c["a"],VaModal:r["a"]},props:{mode:{type:String,required:!0}},data:function(){return{appName:"",systemUniqueName:"",zone:"",buildGroup:"",open:!1}},computed:{getTitle:function(){return this.$store.getters.getModeName(this.mode)+"应用"}},methods:{openModal:function(){this.open=!0},closeModal:function(){this.open=!1},submit:function(){var t=this;""!==this.appName&&""!==this.systemUniqueName&&""!==this.zone&&""!==this.group?this.$axios.post("/application/save",{appName:this.appName,systemUniqueName:this.systemUniqueName,zone:this.zone,buildGroup:this.buildGroup}).then(function(e){e.data.success?(t.$swal({type:"success",confirmButtonColor:"#4ae387",text:e.data.msg}),t.$emit("refresh"),t.closeModal()):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})}):this.$swal({type:"error",confirmButtonColor:"#4ae387",text:"所有参数都是必填项，请检查后提交"})}}},u=p,d=(a("52bb"),a("2877")),m=Object(d["a"])(u,o,l,!1,null,"534636e6",null),f=m.exports,h=a("4360"),b={name:"ApplicationManage",components:{ApplicationModal:f,BaseManage:n["a"]},data:function(){return{title:"应用管理",filterList:["appName"],fields:[{name:"appName",title:"应用名称"},{name:"systemUniqueName",title:"应用唯一名称"},{name:"zone",title:"部署单元"},{name:"buildGroup",title:"部署分组"},{name:"updateTime",title:"修改时间",callback:function(t){return h["a"].getters.getFormatDate(t)}}],mode:"",totalPages:2}},methods:{addNew:function(){this.mode="new",this.$refs.appModal.openModal()},refresh:function(){this.$refs.baseManage.getFilterPage()}}},g=b,v=Object(d["a"])(g,s,i,!1,null,"85fb9284",null);e["default"]=v.exports},"52bb":function(t,e,a){"use strict";var s=a("6c989"),i=a.n(s);i.a},"6c989":function(t,e,a){},"9c42":function(t,e,a){"use strict";var s=a("ae0d"),i=a.n(s);i.a},ae0d:function(t,e,a){},b7f9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-manage"}},[a("va-card",{attrs:{title:t.title}}),a("base-filter",{staticClass:"mt-4",attrs:{"filter-list":t.filterList},on:{click:t.clickFilter,addNew:t.addNew}}),a("base-table",t._g({staticClass:"mt-4",attrs:{fields:t.fields,data:t.tableData,"per-page":t.perPage,"total-pages":t.totalPages},on:{pageSelected:t.pageSelected,remove:t.remove}},t.$listeners))],1)},i=[],n=(a("d25f"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-filter"}},[t.showFilter?a("va-card",{attrs:{title:"Filter"}},[a("div",{staticClass:"va-row row filter-part"},[t.show("appId")?a("va-select",{staticClass:"flex xl3",attrs:{label:"应用名称",options:t.appList,"text-by":"appName"},model:{value:t.appInfo,callback:function(e){t.appInfo=e},expression:"appInfo"}}):t._e(),t.show("appName")?a("va-select",{staticClass:"flex xl3",attrs:{label:"应用名称",options:t.appList,"text-by":"appName"},model:{value:t.appContent,callback:function(e){t.appContent=e},expression:"appContent"}}):t._e(),t.show("gitLabUrl")?a("va-input",{staticClass:"flex xl3",attrs:{label:"gitlab项目链接"},model:{value:t.gitLabUrl,callback:function(e){t.gitLabUrl=e},expression:"gitLabUrl"}}):t._e(),t.show("jenkinsJobName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"jenkins项目名称"},model:{value:t.jenkinsJobName,callback:function(e){t.jenkinsJobName=e},expression:"jenkinsJobName"}}):t._e(),t.show("requirementName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"需求名称"},model:{value:t.requirementName,callback:function(e){t.requirementName=e},expression:"requirementName"}}):t._e(),t.show("className")?a("va-input",{staticClass:"flex xl3",attrs:{label:"类全称(com.xx.yService)"},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}}):t._e(),t.show("methodName")?a("va-input",{staticClass:"flex xl3",attrs:{label:"方法全称"},model:{value:t.methodName,callback:function(e){t.methodName=e},expression:"methodName"}}):t._e(),t.show("description")?a("va-input",{staticClass:"flex xl3",attrs:{label:"介绍"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}):t._e()],1),a("div",{staticClass:"va-row"},[a("va-button",{directives:[{name:"show",rawName:"v-show",value:t.showNew,expression:"showNew"}],staticClass:"base-filter-btn-new",on:{click:t.addNew}},[t._v("New")]),a("va-button",{staticClass:"base-filter-btn-filter",attrs:{color:"info"},on:{click:t.clickAction}},[t._v("Filter")])],1)]):t._e()],1)}),o=[],l=a("8fb3"),r=a("7a71"),c=a("0932"),p=a("4360"),u={name:"BaseFilter",components:{VaButton:c["a"],VaInput:r["a"],VaCard:l["a"]},props:{filterList:Array,showNew:{type:Boolean,default:!0}},computed:{showFilter:function(){return"undefined"!==typeof this.filterList&&this.filterList.length>0}},data:function(){return{appList:[],appInfo:"",appContent:"",gitLabUrl:"",jenkinsJobName:"",requirementName:"",className:"",methodName:"",description:""}},methods:{show:function(t){return this.filterList.includes(t)},addNew:function(){this.$emit("addNew")},clickAction:function(){var t={appId:this.appInfo.id,appName:this.appContent.appName,description:this.description,className:this.className,methodName:this.methodName};this.$emit("click",t)}},created:function(){var t=this,e={pageSize:200,pageNum:1};this.$axios.post("/application/filter",e).then(function(e){e.data.success?t.appList=e.data.data.resultList:t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})})}},d=u,m=(a("9c42"),a("2877")),f=Object(m["a"])(d,n,o,!1,null,"1d73718e",null),h=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"base-table"}},[a("va-card",[a("va-data-table",{attrs:{fields:t.fields,data:t.data,"per-page":t.perPage,"api-mode":t.apiMode,"total-pages":t.totalPages},on:{"page-selected":t.pageSelected},scopedSlots:t._u([{key:"redisStateSlot",fn:function(e){return[a("redis-status-template",t._g({attrs:{data:e.rowData},model:{value:e.rowData.taskStatus,callback:function(a){t.$set(e.rowData,"taskStatus",a)},expression:"props.rowData.taskStatus"}},t.$listeners))]}},{key:"actionsSlot",fn:function(e){return[a("actions-template",t._g({attrs:{data:e.rowData}},t.$listeners))]}}])})],1)],1)},g=[],v=a("04f4"),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-button",{attrs:{small:"",color:t.autoColor,"icon-right":t.showIcon},on:{click:t.changeStatus}},[t._v(t._s(t.getText))])},w=[],x={name:"RedisStatusTemplate",props:{value:Number,data:Object},computed:{getText:function(){return"undefined"!==typeof this.data.connect&&0===this.data.connect?"异常":p["a"].getters.getTaskStatusEnum(this.value)},autoColor:function(){if("undefined"!==typeof this.data.connect&&0===this.data.connect)return"danger";switch(this.value){case 0:return"gray";case 1:return"info";case 2:return"success";case 3:return"warning";case 4:return"danger";case 5:return"danger"}},showIcon:function(){return[1,2,3].includes(this.value)?"fa fa-cog":""}},methods:{changeStatus:function(){this.$emit("changeStatus",this.data)}}},y=x,k=Object(m["a"])(y,N,w,!1,null,"4c43331c",null),C=k.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"actions-template"}},[a("va-button",{attrs:{flat:"",small:"",color:"gray",icon:"fa fa-pencil"},on:{click:t.edit}}),a("va-button",{attrs:{flat:"",small:"",color:"gray",icon:"fa fa-trash"},on:{click:t.remove}})],1)},_=[],S={name:"ActionsTemplate",props:{data:Object},methods:{edit:function(){this.$emit("edit",{param:this.data})},remove:function(){this.$emit("remove",{param:this.data})}}},q=S,L=Object(m["a"])(q,$,_,!1,null,"55445a51",null),P=L.exports,B={name:"BaseTable",components:{ActionsTemplate:P,RedisStatusTemplate:C,VaCard:l["a"],VaDataTable:v["a"]},props:{fields:{type:Array,required:!0},data:{type:Array,required:!0},perPage:{type:Number,default:10},totalPages:{type:Number,required:!0}},data:function(){return{apiMode:!0}},methods:{pageSelected:function(t){this.$emit("pageSelected",t)}}},M=B,j=Object(m["a"])(M,b,g,!1,null,"5afc1a2a",null),F=j.exports,T={name:"BaseManage",components:{VaCard:l["a"],BaseTable:F,BaseFilter:h},props:{title:{type:String,required:!0},systemPath:{type:String,required:!0},filterList:Array,fields:{type:Array,required:!0},perPage:{type:Number,default:10},initTable:{type:Boolean,default:!0}},data:function(){return{filter:{},tableData:[],totalPages:0,pageNum:1}},methods:{clickFilter:function(t){this.filter=t,this.getFilterPage()},addNew:function(){this.$emit("addNew")},remove:function(t){var e=this;4!==t.param.taskStatus?this.$swal({title:"Error",text:"请先结束规则后再尝试删除",type:"error",confirmButtonColor:"#4ae387"}):this.$swal({type:"warning",confirmButtonColor:"#4ae387",text:"确认删除该规则吗？"}).then(function(a){Object.keys(a).includes("value")&&!0===a["value"]&&e.$axios.post("/".concat(e.systemPath,"/remove"),t.param.id).then(function(t){t.data.success?(e.$swal({type:"success",confirmButtonColor:"#4ae387",text:t.data.msg}),e.getFilterPage()):e.$swal({type:"error",confirmButtonColor:"#4ae387",text:t.data.msg})})})},pageSelected:function(t){this.pageNum=t,this.getFilterPage()},getFilterPage:function(){var t=this,e=this.filter;e["pageSize"]=10,e["pageNum"]=this.pageNum,this.$axios.post("/".concat(this.systemPath,"/filter"),e).then(function(e){e.data.success?(t.totalPages=e.data.data.totalPages,t.tableData=e.data.data.resultList):t.$swal({type:"error",confirmButtonColor:"#4ae387",text:e.data.msg})})}},created:function(){this.initTable&&this.getFilterPage()}},U=T,A=Object(m["a"])(U,s,i,!1,null,"8b794c1e",null);e["a"]=A.exports}}]);
//# sourceMappingURL=chunk-a25d757c.d5c7538e.js.map